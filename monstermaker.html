<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Monster Maker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .section { margin-bottom: 20px; padding: 10px; border: 1px solid #ccc; border-radius: 8px; }
    label { display: block; margin: 5px 0; }
    input, select, textarea { width: 100%; padding: 5px; margin-top: 2px; }
    h2 { margin-top: 0; }
    button { margin-top: 10px; padding: 5px 10px; }
  </style>
</head>
<body>
  <h1>Monster Maker</h1>

  <!-- Basic Info -->
  <div class="section">
    <h2>Basic Info</h2>
    <label>Name: <input type="text" id="name"></label>
    <label>Size: <input type="text" id="size"></label>
    <label>Type:
      <select id="type">
        <option value="aberration">Aberration</option>
        <option value="beast">Beast</option>
        <option value="celestial">Celestial</option>
        <option value="construct">Construct</option>
        <option value="dragon">Dragon</option>
        <option value="elemental">Elemental</option>
        <option value="fey">Fey</option>
        <option value="fiend">Fiend</option>
        <option value="giant">Giant</option>
        <option value="humanoid">Humanoid</option>
        <option value="monstrosity">Monstrosity</option>
        <option value="ooze">Ooze</option>
        <option value="plant">Plant</option>
        <option value="undead">Undead</option>
      </select>
    </label>
    <label>Alignment:
      <select id="alignment">
        <option value="lawful good">Lawful Good</option>
        <option value="neutral good">Neutral Good</option>
        <option value="chaotic good">Chaotic Good</option>
        <option value="lawful neutral">Lawful Neutral</option>
        <option value="true neutral">True Neutral</option>
        <option value="chaotic neutral">Chaotic Neutral</option>
        <option value="lawful evil">Lawful Evil</option>
        <option value="neutral evil">Neutral Evil</option>
        <option value="chaotic evil">Chaotic Evil</option>
      </select>
    </label>
    <label>Armor Class: <input type="text" id="ac"></label>
    <label>Hit Points: <input type="text" id="hp"></label>
  </div>

  <!-- Speeds -->
  <div class="section">
    <h2>Speeds</h2>
    <div id="speed-list"></div>
    <button type="button" onclick="addSpeed()">+ Add Speed</button>
  </div>

  <!-- Ability Scores -->
  <div class="section">
    <h2>Ability Scores</h2>
    <label>STR: <input type="number" id="str"></label>
    <label>DEX: <input type="number" id="dex"></label>
    <label>CON: <input type="number" id="con"></label>
    <label>INT: <input type="number" id="int"></label>
    <label>WIS: <input type="number" id="wis"></label>
    <label>CHA: <input type="number" id="cha"></label>
  </div>

  <!-- Extra Fields -->
  <div class="section">
    <h2>Other Stats</h2>
    <label>Saving Throws: <input type="text" id="savingThrows"></label>
    <label>Skills: <input type="text" id="skills"></label>
    <label>Damage Immunities: <input type="text" id="damageImmunities"></label>
    <label>Damage Resistances: <input type="text" id="damageResistances"></label>
    <label>Damage Vulnerabilities: <input type="text" id="damageVulnerabilities"></label>
    <label>Condition Immunities: <input type="text" id="conditionImmunities"></label>
    <label>Senses: <input type="text" id="senses"></label>
    <label>Languages: <input type="text" id="languages"></label>
    <label>Challenge: <input type="text" id="challenge"></label>
  </div>

  <!-- Traits -->
  <div class="section">
    <h2>Traits</h2>
    <div id="traits"></div>
    <button type="button" onclick="addTrait()">+ Add Trait</button>
  </div>

  <!-- Actions -->
  <div class="section">
    <h2>Actions</h2>
    <div id="actions"></div>
    <button type="button" onclick="addAction()">+ Add Action</button>
  </div>

  <!-- Reactions -->
  <div class="section">
    <h2>Reactions</h2>
    <div id="reactions"></div>
    <button type="button" onclick="addReaction()">+ Add Reaction</button>
  </div>

  <!-- Legendary Actions -->
  <div class="section">
    <h2>Legendary Actions</h2>
    <div id="legendaryActions"></div>
    <button type="button" onclick="addLegendaryAction()">+ Add Legendary Action</button>
  </div>

  <!-- Lair Actions -->
  <div class="section">
    <h2>Lair Actions</h2>
    <div id="lairActions"></div>
    <button type="button" onclick="addLairAction()">+ Add Lair Action</button>
  </div>

  <!-- Regional Effects -->
  <div class="section">
    <h2>Regional Effects</h2>
    <div id="regionalEffects"></div>
    <button type="button" onclick="addRegionalEffect()">+ Add Regional Effect</button>
  </div>

  <button onclick="saveMonster()">Save Monster JSON</button>

  <script>
    function addSpeed(type = "", value = "") {
      const div = document.createElement("div");
      div.innerHTML = `
        <input type="text" placeholder="Type (e.g. fly)" value="${type}"> 
        <input type="text" placeholder="Speed (e.g. 30 ft.)" value="${value}">
        <button type="button" onclick="this.parentElement.remove()">Remove</button>
      `;
      document.getElementById("speed-list").appendChild(div);
    }

    function addTrait(name = "", desc = "") {
      const div = document.createElement("div");
      div.innerHTML = `<input type="text" placeholder="Trait Name" value="${name}">
        <textarea placeholder="Trait Description">${desc}</textarea>
        <button type="button" onclick="this.parentElement.remove()">Remove</button>`;
      document.getElementById("traits").appendChild(div);
    }

    function addAction(name = "", desc = "") {
      const div = document.createElement("div");
      div.innerHTML = `<input type="text" placeholder="Action Name" value="${name}">
        <textarea placeholder="Action Description">${desc}</textarea>
        <button type="button" onclick="this.parentElement.remove()">Remove</button>`;
      document.getElementById("actions").appendChild(div);
    }

    function addReaction(name = "", desc = "") {
      const div = document.createElement("div");
      div.innerHTML = `<input type="text" placeholder="Reaction Name" value="${name}">
        <textarea placeholder="Reaction Description">${desc}</textarea>
        <button type="button" onclick="this.parentElement.remove()">Remove</button>`;
      document.getElementById("reactions").appendChild(div);
    }

    function addLegendaryAction(name = "", desc = "") {
      const div = document.createElement("div");
      div.innerHTML = `<input type="text" placeholder="Legendary Action Name" value="${name}">
        <textarea placeholder="Legendary Action Description">${desc}</textarea>
        <button type="button" onclick="this.parentElement.remove()">Remove</button>`;
      document.getElementById("legendaryActions").appendChild(div);
    }

    function addLairAction(desc = "") {
      const div = document.createElement("div");
      div.innerHTML = `<textarea placeholder="Lair Action Description">${desc}</textarea>
        <button type="button" onclick="this.parentElement.remove()">Remove</button>`;
      document.getElementById("lairActions").appendChild(div);
    }

    function addRegionalEffect(desc = "") {
      const div = document.createElement("div");
      div.innerHTML = `<textarea placeholder="Regional Effect Description">${desc}</textarea>
        <button type="button" onclick="this.parentElement.remove()">Remove</button>`;
      document.getElementById("regionalEffects").appendChild(div);
    }

    function saveMonster() {
      const monster = {
        name: document.getElementById("name").value,
        size: document.getElementById("size").value,
        type: document.getElementById("type").value,
        alignment: document.getElementById("alignment").value,
        ac: document.getElementById("ac").value,
        hp: document.getElementById("hp").value,
        speed: Array.from(document.querySelectorAll("#speed-list div")).map(div => {
          const [type, val] = div.querySelectorAll("input");
          return { type: type.value, value: val.value };
        }),
        abilities: {
          str: document.getElementById("str").value,
          dex: document.getElementById("dex").value,
          con: document.getElementById("con").value,
          int: document.getElementById("int").value,
          wis: document.getElementById("wis").value,
          cha: document.getElementById("cha").value
        },
        savingThrows: document.getElementById("savingThrows").value,
        skills: document.getElementById("skills").value,
        damageImmunities: document.getElementById("damageImmunities").value,
        damageResistances: document.getElementById("damageResistances").value,
        damageVulnerabilities: document.getElementById("damageVulnerabilities").value,
        conditionImmunities: document.getElementById("conditionImmunities").value,
        senses: document.getElementById("senses").value,
        languages: document.getElementById("languages").value,
        challenge: document.getElementById("challenge").value,
        traits: Array.from(document.querySelectorAll("#traits div")).map(div => {
          return {
            name: div.querySelector("input").value,
            desc: div.querySelector("textarea").value
          };
        }),
        actions: Array.from(document.querySelectorAll("#actions div")).map(div => {
          return {
            name: div.querySelector("input").value,
            desc: div.querySelector("textarea").value
          };
        }),
        reactions: Array.from(document.querySelectorAll("#reactions div")).map(div => {
          return {
            name: div.querySelector("input").value,
            desc: div.querySelector("textarea").value
          };
        }),
        legendaryActions: Array.from(document.querySelectorAll("#legendaryActions div")).map(div => {
          return {
            name: div.querySelector("input").value,
            desc: div.querySelector("textarea").value
          };
        }),
        lairActions: Array.from(document.querySelectorAll("#lairActions div")).map(div => div.querySelector("textarea").value),
        regionalEffects: Array.from(document.querySelectorAll("#regionalEffects div")).map(div => div.querySelector("textarea").value)
      };

      const blob = new Blob([JSON.stringify(monster, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = monster.name ? monster.name + ".json" : "monster.json";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
